function getCart(){return JSON.parse(localStorage.getItem("cart"))||[]};function saveCart(a){localStorage.setItem("cart",JSON.stringify(a));updateCartCount()};function updateCartCount(){const a=getCart(),b=a.reduce((a,b)=>a+b.qty,0);document.querySelectorAll(".cart-count").forEach(a=>a.textContent=b)};document.addEventListener("DOMContentLoaded",updateCartCount);const grid=document.querySelector("#products .product-grid");grid&&fetch("https://fakestoreapi.com/products").then(a=>a.json()).then(a=>{grid.innerHTML=a.map(a=>`<div class="product-card"><img src="${a.image}" loading="lazy"><h3>${a.title}</h3><p>â‚¹ ${(80*a.price).toFixed(0)}</p><a href="product.html?id=${a.id}" class="btn-cta">View</a></div>`).join("")});"undefined"!=typeof firebase&&firebase.auth().onAuthStateChanged(a=>{const b=document.getElementById("auth-link");if(!b)return;a?(b.textContent="Logout",b.href="#",b.onclick=()=>{firebase.auth().signOut().then(()=>{window.location.href="auth.html"})}) :(b.textContent="Login",b.href="auth.html")});
